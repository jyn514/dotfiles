#!/bin/sh

. "${DOTFILES:-$(dirname "$0")/..}/lib/lib.sh"

status() {
	if is_jj_repo; then
		timeout .1 jj status --ignore-working-copy && return
	fi
	if [ "$(git rev-parse --is-inside-work-tree 2>/dev/null)" = true ]; then
		timeout .1 git s
	else
		ls --classify
	fi
}

[ -n "$1" ] && status
